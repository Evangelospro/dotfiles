; top bar
(defpoll indicators_text :interval "1s" "scripts/indicators")
(defpoll monitors :interval "1m" "hyprctl monitors -j | jaq -rc '[ .[].id ] | sort_by( . )'")

; Clock / Calendar
(defpoll clock_time :interval "5s" "date '+\%lï›˜\%M \%p'")
(defpoll clock_date :interval "10h" "date '+%b %d, %Y'")
(defpoll calendar_day :interval "20h" "date '+%d'")
(defpoll calendar_year :interval "20h" "date '+%Y'")

; Sound
(defpoll volume_percent :interval "5s"  :run_while volume_reveal "scripts/volume --get")
(defpoll mic_percent :interval "1s" "amixer -D pulse sget Capture | grep 'Left:' | awk -F'[][]' '{ print $2 }' | tr -d '%'")

; Brightness
(defpoll brightness_percent :interval "1s" :run_while brightness_reveal "scripts/brightness --get")

; Wifi
(defpoll interfaceId :interval "1m" "nmcli c s --active | awk '/wifi|ethernet/ {print $4}' | head -n 1")
(defpoll COL_WLAN :interval "20s" :run_while wifi_reveal "scripts/stats --wifi --col")
(defpoll ESSID_WLAN :interval "20s" :run_while wifi_reveal "scripts/stats --wifi --essid")
(defpoll WLAN_ICON :interval "20s" :run_while wifi_reveal  "scripts/stats --wifi --icon")

; Literals
(deflisten workspaces0_literal "scripts/workspaces 1")
(deflisten workspaces1_literal "scripts/workspaces 2")
(deflisten appname0_literal "scripts/appname 1")
(deflisten appname1_literal "scripts/appname 2")

; revealers
(defvar side_reveal false)
(defvar notifications_reveal false)
(defvar volume_reveal false)
(defvar brightness_reveal false)
(defvar control_reveal false)
(defvar wifi_reveal false)
(defvar time_reveal false)

; Sidebar music data (poll only when hovered)
(defpoll art		:interval "1s" :run-while side_reveal "scripts/music coverloc")
(defpoll title		:interval "1s" :run-while side_reveal "scripts/music title")
(defpoll artist		:interval "1s" :run-while side_reveal "scripts/music artist")
(defpoll album		:interval "1s" :run-while side_reveal "scripts/music album")
(defpoll playpause	:interval "1s" :run-while side_reveal "scripts/music statusicon")
(defpoll lyrics		:interval "1s" :run-while side_reveal "scripts/music lyrics")

; sidebar system data (poll only when hovered)
(defpoll uptime :run-while side_reveal :interval "1m" "uptime -p | sed -e 's/up //;s/ hours,/h/;s/ minutes/m/'")
(defpoll packages :run-while side_reveal :interval "5m" `pacman -Q | wc -l`)
(defpoll kernel :run-while side_reveal :interval "5m" `uname -r`)
(defpoll name :run-while side_reveal :interval "5m" `whoami`)
(defpoll host :run-while side_reveal :interval "5m" `uname -n`)
(defpoll wm :run-while side_reveal :interval "5m" `echo $XDG_CURRENT_DESKTOP`)

; Notification variables
(deflisten notificationsCards "scripts/logger subscribe")
(defpoll notificationsCrits :interval "1s" :run_while notifications_reveal "scripts/logger crits")
(defpoll notificationNum :interval "1s" :run_while notifications_reveal "scripts/logger tot")

;system
(defpoll battery :interval "1s" :run_while control_reveal "scripts/stats --bat --percent")
(defpoll battery_status :interval "1s" :run_while control_reveal "scripts/stats --bat --status")