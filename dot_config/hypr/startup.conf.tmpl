# XDG portals(long up startup fix)
exec-once=/usr/bin/systemctl --user import-environment WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once=/usr/bin/dbus-update-activation-environment --all
exec-once=$HOME/.config/hypr/scripts/default/fix-xdg-portals

# Polkit
exec-once=/usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1

# scale apps
exec-once = xprop -root -f _XWAYLAND_GLOBAL_OUTPUT_SCALE 32c -set _XWAYLAND_GLOBAL_OUTPUT_SCALE 2

{{- if (ne .chezmoi.hostname "ELARCH-ISO") }}
# exec-once=$HOME/.local/share/hyprload/hyprload.sh
# exec-once=hyprctl dispatch hyprload update # needs sudo for now
{{- end }}

# Theming
exec-once=/usr/bin/xsettingsd &
exec-once=$HOME/.config/hypr/scripts/import_themes
# exec-once=$HOME/.azotebg-hyprland
exec-once=/usr/bin/hyprpaper

# Bar
## script to load icons on workspaces
exec-once=$HOME/.config/waybar/launch

# IDLE management
exec-once=swayidle

# Applets / OSD / Notifications
exec-once=/usr/bin/swaync
exec-once=/usr/bin/wl-paste --watch cliphist store
exec-once=/usr/bin/usbguard-applet-qt &
exec-once=XDG_CURRENT_DESKTOP=Unity /usr/bin/blueman-applet
exec-once=/usr/bin/nm-applet --indicator
exec-once=/usr/bin/avizo-service

# Utilities & Background apps
exec-once=/usr/bin/flameshot

# Overclock igpu
# exec-once=/usr/bin/intel_gpu_frequency -m

# Speed up browser startup
exec-once=[workspace special:backgroundappsbrowser silent] /usr/bin/thorium-browser

# OPTIONAL COMPLETELY personal stuff
{{- if (eq .chezmoi.hostname "ELARCH-F15") }}
exec-once=[workspace special:backgroundappsvalent silent] /usr/bin/valent
exec-once=[workspace special:backgroundappsrogcontrolcenter silent] /usr/bin/rog-control-center
exec-once=/usr/bin/fusermount -u $HOME/SeaDrive ; /usr/bin/seadrive -o default_permissions,allow_root,exec -c $HOME/.config/seadrive/seadrive.conf -l $HOME/.seadrive/logs/seadrive.log -f -d $HOME/.seadrive/data $HOME/SeaDrive
{{- end }}
{{- if (eq .chezmoi.hostname "ELARCH-ISO") }}
exec-once=/usr/bin/calamares_polkit
{{- end }}
