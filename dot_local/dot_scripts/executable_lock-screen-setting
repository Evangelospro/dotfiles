set $locker 'swaylock -s fill -i ~/background.png'
exec swayidle -w \
    timeout 1800 'playerctl pause' \
    timeout 1800 $locker \
    timeout 900 'swaymsg "output * dpms off"' \
    timeout 15 'if pgrep -x swaylock; then swaymsg "output * dpms off"; fi' \
    resume 'swaymsg "output * dpms on"' \
    before-sleep $locker