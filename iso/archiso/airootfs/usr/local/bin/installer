#!/usr/bin/zsh
# Ensure connection to the internet and time synchronization
if ! ping -c 1 archlinux.org &> /dev/null; then
    echo "No internet connection please activate a connection or connect to an ethernet cable"
    sleep 2
    nmtui
fi
chezmoi init Evangelospro
# No need to clone the external/submodule repos for the live environment
chezmoi apply --exclude externals,encrypted
cp $HOME/.config/hypr/monitors_extend.conf $HOME/.config/hypr/monitors.conf
echo "Installation phase"
sudo cp $HOME/.local/share/chezmoi/confs/etc/* /etc/ -r
sudo cp $HOME/.local/share/chezmoi/confs/opt/* /opt/ -r
sudo cp $HOME/.local/share/chezmoi/confs/usr/* /usr/ -r
# sudo pacman-key --init
# sudo pacman-key --populate
# rate-mirrors --allow-root arch | sudo tee /etc/pacman.d/mirrorlist
# paru -Syu --noconfirm
sudo systemctl enable --now sddm
